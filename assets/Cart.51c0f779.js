import{_ as F,q as M,s as P,h as R,i as $,v as m,r as n,o as h,c as k,k as s,w as r,u as a,a as l,F as z,d as D,x as f,y as I,e as T,f as y,z as j,p as G,m as H,A as J,B as K}from"./index.53871c04.js";const u=i=>(G("data-v-76b3dd53"),i=i(),H(),i),O=u(()=>l("div",null,"sssssssss",-1)),Q={class:"cart-box"},W={class:"empty"},X=u(()=>l("i",{class:"van-icon van-icon-smile-o"},null,-1)),Y=u(()=>l("div",{class:"title"},"\u8D2D\u7269\u8F66\u7A7A\u7A7A\u7A7A\u5982\u4E5F",-1)),Z=u(()=>l("span",{class:"van-button__text"},"\u524D\u5F80\u9996\u9875",-1)),ee=[Z],te=u(()=>l("span",null,"\u4FEE\u6539\u5730\u5740",-1)),oe={__name:"Cart",setup(i){let b=M(),_=P(),v=R([]);$(()=>{_.changeCartListAsync()});let c=m(()=>_.cartList),V=m(()=>c.value.reduce((o,t)=>o+(t.checked?t.goodsCount*t.sellingPrice*100:0),0)),p=m({get:()=>c.value.every(o=>o.checked),set:o=>{c.value.forEach(t=>t.checked=o)}}),x=()=>{c.value.filter(o=>{o.checked&&v.value.push(o.cartItemId)}),localStorage.setItem("cartItemIds",v.value),v.value=[],b.push("/addressList")},g=()=>{},L=async o=>{(await J(o.cartItemId,o.goodsCount)).resultCode==200&&_.changeCartListAsync()},w=o=>{K(o).then(t=>{t.resultCode==200&&_.changeCartListAsync()})};return(o,t)=>{const S=n("van-icon"),A=n("van-nav-bar"),C=n("van-checkbox"),B=n("van-card"),U=n("van-stepper"),N=n("van-button"),q=n("van-swipe-cell"),E=n("van-submit-bar");return h(),k("div",null,[s(A,{title:"\u8D2D\u7269\u8F66","left-arrow":"",onClickLeft:t[0]||(t[0]=e=>a(b).back())},{right:r(()=>[s(S,{name:"ellipsis"})]),_:1}),O,l("div",Q,[(h(!0),k(z,null,D(a(c),e=>f((h(),T(q,{key:e.goodsId},{right:r(()=>[s(N,{square:"",text:"\u5220\u9664",type:"danger",class:"delete-button",onClick:d=>a(w)(e.cartItemId)},null,8,["onClick"])]),default:r(()=>[s(C,{modelValue:e.checked,"onUpdate:modelValue":d=>e.checked=d},null,8,["modelValue","onUpdate:modelValue"]),s(B,{class:"goods-card",thumb:e.goodsCoverImg,title:e.goodsName,price:e.sellingPrice},null,8,["thumb","title","price"]),s(U,{modelValue:e.goodsCount,"onUpdate:modelValue":d=>e.goodsCount=d,onChange:d=>a(L)(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)),[[I,a(c).length]])),128)),f(l("div",W,[X,Y,l("button",{onClick:t[1]||(t[1]=(...e)=>a(g)&&a(g)(...e)),class:"van-button van-button--primary van-button--normal van-button--block",style:{color:"rgb(255, 255, 255)",background:"rgb(27, 174, 174)"}},ee)],512),[[I,!a(c).length]])]),s(E,{price:a(V),"button-text":"\u63D0\u4EA4\u8BA2\u5355",onSubmit:a(x)},{tip:r(()=>[y(" \u4F60\u7684\u6536\u8D27\u5730\u5740\u4E0D\u652F\u6301\u540C\u57CE\u9001, "),te]),default:r(()=>[s(C,{modelValue:a(p),"onUpdate:modelValue":t[2]||(t[2]=e=>j(p)?p.value=e:p=e)},{default:r(()=>[y("\u5168\u9009")]),_:1},8,["modelValue"])]),_:1},8,["price","onSubmit"])])}}},ne=F(oe,[["__scopeId","data-v-76b3dd53"]]);export{ne as default};
